(this["webpackJsonpzen-report"]=this["webpackJsonpzen-report"]||[]).push([[0],{39:function(e,t){},40:function(e,t){},41:function(e,t){},5:function(e,t,n){"use strict";var o=n(39);n.o(o,"ReportType")&&n.d(t,"ReportType",(function(){return o.ReportType}));var r=n(40);n.o(r,"ReportType")&&n.d(t,"ReportType",(function(){return r.ReportType}));var c=n(41);n.o(c,"ReportType")&&n.d(t,"ReportType",(function(){return c.ReportType}));var a=n(6);n.d(t,"ReportType",(function(){return a.a}))},6:function(e,t,n){"use strict";var o;n.d(t,"a",(function(){return o})),function(e){e.income="income",e.outcome="outcome"}(o||(o={}))},79:function(e,t){},81:function(e,t){},91:function(e,t,n){},92:function(e,t,n){"use strict";n.r(t);var o=n(1),r=n.n(o),c=n(19),a=n.n(c),i=n(4),u=n(3),s=n(43),l=n(44),d=n(32),m=n(2),b=n(6),p="PUT_TRANSACTIONS",j="SELECT_REPORT_ROW",f="ADD_REPORT_ROW",x="DELETE_REPORT_ROW",v="RENAME_REPORT_ROW",O="ADD_TRANSACTIONS_TO_SELECTED_REPORT",h="REMOVE_TRANSACTIONS_FROM_SELECTED_REPORT",g="ACCOUNT_SELECTION_CHANGE",y="SELECT_TRANSACTION",R="SET_SAVING_AMOUNT",w={accounts:[],incomeReport:[],outcomeReport:[],selectedReportRow:void 0,selectedReportType:b.a.income,selectedTransactionId:"",transactions:[],savings:0};var T=Object(u.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:var n=["#C0C0C0","#808080","#FF0000","#800000","#FFFF00","#808000","#00FF00","#008000","#00FFFF","#008080","#0000FF","#000080","#FF00FF","#800080"],o=t.payload.transactions.map((function(e){return e.account})).filter((function(e,t,n){return n.indexOf(e)===t})).sort((function(e,t){return e.localeCompare(t)})).map((function(e,o){return{name:e,isSelected:-1===t.payload.deselectedAccounts.findIndex((function(t){return t===e})),colour:n[o%n.length]}})),r=t.payload.transactions.sort((function(e,t){return e.category===t.category?e.subCategory.localeCompare(t.subCategory):e.category.localeCompare(t.category)}));return Object(m.a)(Object(m.a)({},e),{},{transactions:r,accounts:o,incomeReport:[],outcomeReport:[],savings:0,selectedReportRow:void 0,selectedReportType:b.a.income,selectedTransactionId:""});case j:var c=t.payload;if(c===b.a.income)return Object(m.a)(Object(m.a)({},e),{},{selectedReportRow:void 0,selectedReportType:b.a.income});if(c===b.a.outcome)return Object(m.a)(Object(m.a)({},e),{},{selectedReportRow:void 0,selectedReportType:b.a.outcome});var a=e.incomeReport.findIndex((function(e){return e.id===c}));if(-1!==a)return Object(m.a)(Object(m.a)({},e),{},{selectedReportRow:e.incomeReport[a],selectedReportType:b.a.income});var i=e.outcomeReport.findIndex((function(e){return e.id===c}));return-1!==i?Object(m.a)(Object(m.a)({},e),{},{selectedReportRow:e.outcomeReport[i],selectedReportType:b.a.outcome}):e;case f:return t.payload.reportType===b.a.income?Object(m.a)(Object(m.a)({},e),{},{incomeReport:[].concat(Object(d.a)(e.incomeReport),[t.payload.row])}):Object(m.a)(Object(m.a)({},e),{},{outcomeReport:[].concat(Object(d.a)(e.outcomeReport),[t.payload.row])});case x:var u,s=e.selectedReportRow,l=null===(u=s)||void 0===u?void 0:u.id;if(void 0!==s){if(e.selectedReportType===b.a.income){var T=e.incomeReport.findIndex((function(e){var t;return e.id===(null===(t=s)||void 0===t?void 0:t.id)})),C=T<e.incomeReport.length-1?T+1:T-1;s=C<0?void 0:e.incomeReport[C]}else{var N=e.outcomeReport.findIndex((function(e){var t;return e.id===(null===(t=s)||void 0===t?void 0:t.id)})),S=N<e.outcomeReport.length-1?N+1:N-1;s=S<0?void 0:e.outcomeReport[S]}return Object(m.a)(Object(m.a)({},e),{},{transactions:e.transactions.map((function(e){return e.reportId===l?Object(m.a)(Object(m.a)({},e),{},{reportId:void 0}):e})),selectedReportRow:s,incomeReport:e.incomeReport.filter((function(e){return e.id!==l})),outcomeReport:e.outcomeReport.filter((function(e){return e.id!==l}))})}return e;case y:return-1===e.transactions.findIndex((function(e){return e.id===t.payload}))?e:Object(m.a)(Object(m.a)({},e),{},{selectedTransactionId:t.payload});case g:return Object(m.a)(Object(m.a)({},e),{},{accounts:e.accounts.map((function(e){return e.name===t.payload.accountId?Object(m.a)(Object(m.a)({},e),{},{isSelected:t.payload.selection}):e}))});case h:var k=t.payload,I=e.transactions.map((function(e){return-1===k.findIndex((function(t){return t===e.id}))?e:Object(m.a)(Object(m.a)({},e),{},{reportId:void 0})}));return Object(m.a)(Object(m.a)({},e),{},{transactions:I});case O:var A=t.payload,E=e.transactions.map((function(t){var n;return-1===A.findIndex((function(e){return e===t.id}))?t:Object(m.a)(Object(m.a)({},t),{},{reportId:null===(n=e.selectedReportRow)||void 0===n?void 0:n.id})}));return Object(m.a)(Object(m.a)({},e),{},{transactions:E});case v:var F=t.payload.id;return Object(m.a)(Object(m.a)({},e),{},{incomeReport:e.incomeReport.map((function(e){return e.id!==F?e:Object(m.a)(Object(m.a)({},e),{},{name:t.payload.name})})),outcomeReport:e.outcomeReport.map((function(e){return e.id!==F?e:Object(m.a)(Object(m.a)({},e),{},{name:t.payload.name})}))});case R:return Object(m.a)(Object(m.a)({},e),{},{savings:t.payload});default:return e}}),Object(s.composeWithDevTools)(Object(u.applyMiddleware)(l.a))),C=n(0),N=function(e){var t=e.labelText,n=e.changed,o=e.checked,r=e.enabled;return Object(C.jsxs)("label",{className:"flex justify-start items-start"+(r?"":" opacity-20"),children:[Object(C.jsxs)("div",{className:"bg-white border-2 rounded my-auto border-gray-400 w-4 h-4 flex mr-1",children:[Object(C.jsx)("input",{type:"checkbox",className:"opacity-0 absolute w-4 h-4",checked:o,onChange:function(e){return n(e.target.checked)},disabled:!r}),Object(C.jsx)("svg",{className:"fill-current hidden w-3 h-3 text-blue-900 pointer-events-none",viewBox:"0 0 20 20",children:Object(C.jsx)("path",{d:"M0 11l2-2 5 5L18 3l2 2L7 18z"})})]}),Object(C.jsx)("div",{className:"select-none",children:t})]})};N.defaultProps={enabled:!0,labelText:""};var S=N,k=function(e){var t=e.text;return Object(C.jsx)("div",{className:"text-xl text-blue-900 font-semibold mb-2",children:t})},I=function(e){return Object(C.jsxs)("div",{className:"divide-y-2 divide-gray-300",children:[Object(C.jsx)(k,{text:e.header}),e.children]})},A=function(e){var t=e.text,n=e.onClick,o=e.disabled;return Object(C.jsx)("button",{disabled:!0===o,className:"h-9 focus:outline-none disabled:opacity-50 text-white text-sm py-2 w-5 flex-grow mr-1 bg-blue-900"+(!0!==o?" hover:bg-blue-600 hover:shadow-md":" cursor-not-allowed"),onClick:n,children:t})},E=function(e){var t=e.text,n=e.onClick,o=e.disabled;return Object(C.jsx)("button",{disabled:!0===o,className:"h-9 focus:outline-none disabled:opacity-50  text-white text-sm py-2 w-5 flex-grow mr-1 bg-green-900"+(!0!==o?" hover:bg-green-600 hover:shadow-md":" cursor-not-allowed"),onClick:n,children:t})},F=function(e){var t=e.colour;return Object(C.jsx)("div",{className:"w-1 mx-1",style:{backgroundColor:t}})},M=function(){return Object(C.jsx)("div",{className:"h-5"})},D=function(){return Object(C.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"inline-icon",viewBox:"0 0 16 16",children:[Object(C.jsx)("path",{d:"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456l-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"}),Object(C.jsx)("path",{fillRule:"evenodd",d:"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"})]})},_=function(){return Object(C.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"inline-icon",viewBox:"0 0 16 16",children:[Object(C.jsx)("path",{d:"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"}),Object(C.jsx)("path",{d:"M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.235.235 0 0 1 .02-.022z"})]})};function L(e){switch(e){case"edit":return Object(C.jsx)(D,{});case"done":return Object(C.jsx)(_,{});default:return Object(C.jsx)("div",{})}}var P=function(e){var t=e.onClick,n=e.iconType;return Object(C.jsx)("button",{className:"focus:outline-none w-6 h-6 flex items-center px-1 text-gray-300 hover:text-gray-700",onClick:t,children:L(n)})},V=n(14);function z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(n){return n({type:p,payload:{transactions:e,deselectedAccounts:t}})}}function B(e){return function(t){return t({type:j,payload:e})}}function H(e,t){return function(n){return n({type:f,payload:{row:e,reportType:t}})}}function U(){return function(e){return e({type:x,payload:void 0})}}function W(e,t){return function(n){return n({type:v,payload:{id:e,name:t}})}}function G(e){return function(t){return t({type:O,payload:e})}}function J(e){return function(t){return t({type:h,payload:e})}}function K(e,t){return function(n){return n({type:g,payload:{accountId:e,selection:t}})}}function Z(e){return function(t){return t({type:y,payload:e})}}function q(e){return function(t){return t({type:R,payload:e})}}var Q=Object(i.b)((function(){return{}}),(function(e){return Object(u.bindActionCreators)({AccountSelectionChange:K},e)}),(function(e,t,n){return Object(m.a)(Object(m.a)(Object(m.a)({},n),e),t)}))((function(e){var t=e.account,n=e.AccountSelectionChange;return Object(C.jsxs)("div",{className:"flex py-2 px-2",children:[Object(C.jsx)(S,{checked:t.isSelected,changed:function(e){var o,r=(null!==(o=V.get("disabled-accounts"))&&void 0!==o?o:[]).filter((function(e){return e!==t.name}));e||r.push(t.name),V.set("disabled-accounts",r),n(t.name,e)}}),Object(C.jsx)(F,{colour:t.colour}),Object(C.jsx)("span",{className:"flex-grow text-gray-600 truncate",children:t.name})]})})),X=n(93);var Y=Object(i.b)((function(e){return{accounts:e.accounts}}),(function(e){return Object(u.bindActionCreators)({},e)}))((function(e){var t=e.accounts,n=Object(X.a)().t;return Object(C.jsx)("div",{children:Object(C.jsx)(I,{header:n("accounts"),children:t.map((function(e){return Object(C.jsx)(Q,{account:e},e.name)}))})})})),$=n(16),ee=new Intl.NumberFormat("ru-RU",{minimumFractionDigits:2});function te(e){return ee.format(Math.abs(e))}function ne(e){return new Date(e).toLocaleString("ru",{day:"numeric",month:"numeric",weekday:"short"})}var oe=function(e,t,n){var o=t?"done":"edit";switch(e){case"hideIcon":return Object(C.jsx)("span",{className:"ml-2 w-6 h-6"});case"title":case"amount":return Object(C.jsx)("span",{className:"ml-2",children:Object(C.jsx)(P,{iconType:o,onClick:n})})}return null},re=function(e){var t=e.title,n=e.amount,r=e.editType,c=e.onChanged,a=e.onClick,i=e.isSelected,u=Object(o.useState)(!1),s=Object($.a)(u,2),l=s[0],d=s[1],m=Object(o.useState)(t),b=Object($.a)(m,2),p=b[0],j=b[1];Object(o.useEffect)((function(){j(t)}),[t]);var f=Object(o.useState)((null!==n&&void 0!==n?n:0).toFixed(2)),x=Object($.a)(f,2),v=x[0],O=x[1];Object(o.useEffect)((function(){O(n.toString())}),[n]);var h=Object(o.useState)(null),g=Object($.a)(h,2),y=g[0],R=g[1];Object(o.useEffect)((function(){null===y||void 0===y||y.focus()}),[y]);var w=function(e){"enter"===e.key.toLowerCase()&&T()},T=function(){if(l){if(d(!1),void 0!==c)if("amount"===r){var e=Number.parseFloat(v);c(isNaN(e)?0:e)}else"title"===r&&c(p)}else d(!0)};return Object(C.jsxs)("div",{className:"flex py-2 px-2"+(void 0!==i?" hover:bg-blue-100":"")+(i?" bg-blue-100":""),onClick:function(){void 0!==a&&a()},children:[l&&"title"===r?Object(C.jsx)("input",{className:"flex-grow w-8 pl-0 mr-2 appearance-none h-6 focus:outline-none ring border-gray-300 ",value:p,type:"text",onKeyPress:w,onChange:function(e){return j(e.target.value)},ref:function(e){return R(e)}}):Object(C.jsxs)("span",{className:"flex-grow truncate text-gray-700",children:[t,"\xa0"]}),l&&"amount"===r?Object(C.jsx)("input",{className:"flex-grow w-8 appearance-none h-6 ml-1 focus:outline-none ring border-gray-300 px-2",value:v,onKeyPress:w,type:"text",ref:function(e){return R(e)},onChange:function(e){return O(e.target.value)}}):Object(C.jsx)("span",{className:"text-gray-700",children:te(n)}),oe(r,l,T)]})};re.defaultProps={editType:"none"};var ce=re;var ae=Object(i.b)((function(e){return{transaction:e.transactions.find((function(t){return t.id===e.selectedTransactionId}))}}),(function(e){return Object(u.bindActionCreators)({},e)}))((function(e){var t=e.transaction,n=Object(X.a)().t;return Object(C.jsxs)(I,{header:n("details"),children:[t&&Object(C.jsx)(ie,{title:n("date"),value:ne(t.time),mutedValue:!1}),t&&Object(C.jsx)(ie,{title:n("amount"),value:te(t.amount),mutedValue:!1}),t&&Object(C.jsx)(ie,{title:n("category"),value:"".concat(t.category).concat(""===t.category||""===t.subCategory?"":" / ").concat(t.subCategory),mutedValue:!1}),t&&Object(C.jsx)(ie,{title:n("subcategory"),value:t.account,mutedValue:!1}),t&&Object(C.jsx)(ie,{title:n("place"),value:t.place,mutedValue:!0}),t&&Object(C.jsx)(ie,{title:n("commentary"),value:t.comment,mutedValue:!0})]})}));function ie(e){var t=e.title,n=e.value,o=e.mutedValue;return Object(C.jsxs)("div",{className:"py-2 px-2",children:[Object(C.jsxs)("span",{className:"text-gray-900 mr-2 font-bold",children:[t,":\xa0"]}),Object(C.jsx)("span",{className:o?"text-gray-500 text-sm":"text-gray-600",children:n})]})}var ue=n(48),se=n(5);function le(e,t,n){var o=t.filter((function(e){return e.isSelected}));return e.filter((function(e){return n===se.ReportType.income?e.amount>0:e.amount<0})).filter((function(e){return-1!==o.findIndex((function(t){return t.name===e.account}))}))}function de(e,t,n){return le(e,t,n).reduce((function(e,t){return e+t.amount}),0)}function me(){return(new Date).getTime().toString()}function be(e){var t=0,n=e.reduce((function(e,n){var o=n.reportId;if(void 0!==o){var r=e[o];void 0===r&&(r=0),r+=n.amount,e[o]=r}else t+=n.amount;return e}),{});return n.unreported=t,n}function pe(e,t){var n=window;n.ym&&n.ym(76817104,e,t)}var je=Object(i.b)(null,(function(e){return Object(u.bindActionCreators)({PutTransactions:z},e)}))((function(e){var t=e.PutTransactions,n=o.useRef(null),r=Object(X.a)().t,c=function(e,t){var n=a(e[8])-a(e[5]);if(0===n)return null;var o=e[1]&&e[1].split("/").map((function(e){return e.trim()})),r=void 0!==o?o[0]:"",c=void 0!==o?o[1]:"";return{account:n<0?e[4]:e[7],amount:n,category:null!==r&&void 0!==r?r:"",subCategory:null!==c&&void 0!==c?c:"",comment:e[3],place:e[2],time:new Date(e[0]).getTime(),reportId:void 0,id:t}},a=function(e){if(!e)return 0;var t=Number.parseFloat(e.replace(",","."));return isNaN(t)?0:t};return Object(C.jsx)("div",{className:"flex-grow mb-3 h-12 mt-6",children:Object(C.jsx)(ue.a,{ref:n,onFileLoad:function(e){var n,o=me(),r=e.filter((function(e,t){return t>3})).map((function(e,t){return c(e.data,o+"-"+t)})).filter((function(e){return null!==e})),a=null!==(n=V.get("disabled-accounts"))&&void 0!==n?n:[];pe("reachGoal","OpenData"),t(r,a)},onError:function(e,t,n,o){console.log(e)},noClick:!0,noProgressBar:!0,noDrag:!0,onRemoveFile:function(e){t([])},children:function(e){var t=e.file;return Object(C.jsxs)("div",{className:"flex flex-row-reverse mx-auto mt-5",children:[Object(C.jsxs)("div",{className:"flex w-64",children:[Object(C.jsx)(A,{text:r("file-load"),onClick:function(e){return function(e,t){e.current&&e.current.open(t)}(n,e)}}),Object(C.jsx)(E,{text:r("file-clear"),onClick:function(e){return function(e,t){e.current&&e.current.removeFile(t)}(n,e)}})]}),Object(C.jsx)("div",{className:"w-80 py-auto border-2 border-gray-300 mr-1 align-middle px-2 overflow-ellipsis overflow-hidden",children:t&&t.name})]})}})})})),fe=Object(i.b)((function(e){return{savings:e.savings,reportRows:e.incomeReport,transactions:le(e.transactions,e.accounts,se.ReportType.income),selectedReportRow:e.selectedReportRow,selectedReportType:e.selectedReportType}}),(function(e){return Object(u.bindActionCreators)({SetSavingsAmount:q,RenameReportName:W,AddReportRow:H,DeleteSelectedReportRow:U,SelectReportRow:B},e)}))((function(e){var t=e.savings,n=e.SetSavingsAmount,o=e.AddReportRow,r=e.DeleteSelectedReportRow,c=e.SelectReportRow,a=e.selectedReportType,i=e.selectedReportRow,u=e.reportRows,s=e.transactions,l=e.RenameReportName,d=Object(X.a)().t,m=be(s),b=a===se.ReportType.income&&void 0===i;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(I,{header:d("incomes"),children:[u.map((function(e){var t;return Object(C.jsx)(ce,{title:e.name,amount:null!==(t=m[e.id])&&void 0!==t?t:0,onClick:function(){return c(e.id)},editType:"title",onChanged:function(t){return l(e.id,t)},isSelected:e.id===(null===i||void 0===i?void 0:i.id)},e.id)})),Object(C.jsx)(ce,{title:d("other"),amount:m.unreported,editType:"hideIcon",onClick:function(){return c(se.ReportType.income)},isSelected:b},"income"),Object(C.jsx)(ce,{title:d("savings"),amount:t,editType:"amount",onChanged:function(e){return n(e)}},"savings")]}),Object(C.jsxs)("div",{className:"flex mt-2",children:[Object(C.jsx)(A,{text:d("add"),onClick:function(){return function(){var e=me();o({id:e,name:d("income")},se.ReportType.income),c(e)}()}}),Object(C.jsx)(E,{text:d("delete"),onClick:r,disabled:b||a!==se.ReportType.income})]})]})}));function xe(){return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("div",{className:"font-mono font-extrabold text-5xl text-blue-900 animate-pulse  mb-2 ml-2 mt-6 mr-2 filter blur-sm",children:"ZenReport"}),Object(C.jsx)("div",{className:"font-mono font-extrabold text-5xl text-white absolute left-0 top-4 mb-2 mr-2 ml-10 mt-4  ",children:"ZenReport"})]})}function ve(e,t,n,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:" ";return"| ".concat(e+r.repeat(n-e.length)," | ").concat(t+r.repeat(o-t.length)," |\n")}function Oe(e,t){var n=function(e){var t=e.reduce((function(e,t){return e<t.name.length?t.name.length:e}),0),n=e.reduce((function(e,t){return e<t.amount.length?t.amount.length:e}),0);return function(e,o){return ve(e,o,t,n,arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ")}}(e),o="## ".concat(t,"\n\n");o+=n(e[0].name,e[0].amount),o+=n("-","-","-");for(var r=1;r<e.length;r++){var c=e[r];o+=n(c.name,c.amount)}return o+="\n\n"}var he=Object(i.b)((function(e){return{savings:e.savings,incomeTransactions:le(e.transactions,e.accounts,se.ReportType.income),outcomeTransactions:le(e.transactions,e.accounts,se.ReportType.outcome),incomeReport:e.incomeReport,outcomeReport:e.outcomeReport}}),(function(e){return Object(u.bindActionCreators)({},e)}))((function(e){var t=e.savings,n=e.incomeTransactions,o=e.incomeReport,r=e.outcomeTransactions,c=e.outcomeReport,a=Object(X.a)().t,i=function(e,t,n,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=Math.abs(t.reduce((function(e,t){return e+t.amount}),0));return e.push({name:"**".concat(a("sum"),"**"),amount:"**".concat((c-r).toFixed(2),"**")}),e.unshift({name:n,amount:o}),e},u=function(e,t){var n,o=e.map((function(e){var n;return{name:e.name,amount:Math.abs(null!==(n=t[e.id])&&void 0!==n?n:0).toFixed(2)}})),r=Math.abs(null!==(n=t.unreported)&&void 0!==n?n:0);return r>0&&o.push({name:a("other"),amount:r.toFixed(2)}),o};return Object(C.jsx)("div",{className:"flex",children:Object(C.jsx)(A,{text:a("copy"),onClick:function(){pe("reachGoal","ExportData");var e=u(o,be(n));0!==t&&e.push({name:a("savings"),amount:t.toFixed(2)});var s=Oe(e=i(e,n,a("source"),a("amount"),t),a("Earned")),l=u(c,be(r)),d=Oe(l=i(l,r,a("outcome"),a("amount")),a("outcomes")),m=n.reduce((function(e,t){return e+t.amount}),0)-t,b=r.reduce((function(e,t){return e-t.amount}),0),p="".concat(a("total-balance"),": ").concat(m.toFixed(2)," - ").concat(b.toFixed(2)," = **").concat((m-b).toFixed(2),"**\n");navigator.clipboard.writeText(s+d+p)},disabled:0===n.length&&0===r.length})})})),ge=Object(i.b)((function(e){return{reportRows:e.outcomeReport,transactions:le(e.transactions,e.accounts,se.ReportType.outcome),selectedReportRow:e.selectedReportRow,selectedReportType:e.selectedReportType}}),(function(e){return Object(u.bindActionCreators)({RenameReportName:W,AddReportRow:H,DeleteSelectedReportRow:U,SelectReportRow:B},e)}))((function(e){var t=e.AddReportRow,n=e.DeleteSelectedReportRow,o=e.SelectReportRow,r=e.selectedReportType,c=e.selectedReportRow,a=e.reportRows,i=e.transactions,u=e.RenameReportName,s=Object(X.a)().t,l=be(i),d=r===se.ReportType.outcome&&void 0===c;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(I,{header:s("outcomes"),children:[a.map((function(e){var t;return Object(C.jsx)(ce,{title:e.name,amount:Math.abs(null!==(t=l[e.id])&&void 0!==t?t:0),onClick:function(){return o(e.id)},editType:"title",onChanged:function(t){return u(e.id,t)},isSelected:e.id===(null===c||void 0===c?void 0:c.id)},e.id)})),Object(C.jsx)(ce,{title:s("other"),amount:Math.abs(l.unreported),editType:"hideIcon",onClick:function(){return o(se.ReportType.outcome)},isSelected:d},"outcome")]}),Object(C.jsxs)("div",{className:"flex mt-2",children:[Object(C.jsx)(A,{text:s("add"),onClick:function(){var e=me();t({id:e,name:s("outcome")},se.ReportType.outcome),o(e)}}),Object(C.jsx)(E,{text:s("delete"),onClick:n,disabled:d||r!==se.ReportType.outcome})]})]})})),ye=Object(i.b)((function(e){return{incomeAmount:de(e.transactions,e.accounts,se.ReportType.income),outcomeAmount:-1*de(e.transactions,e.accounts,se.ReportType.outcome),savings:e.savings}}),(function(e){return Object(u.bindActionCreators)({},e)}))((function(e){var t=e.incomeAmount,n=e.outcomeAmount,o=e.savings,r=Object(X.a)().t;return Object(C.jsxs)(I,{header:r("total-balance"),children:[Object(C.jsx)(ce,{title:r("total-income"),amount:Math.abs(t-o)}),Object(C.jsx)(ce,{title:r("total-outcome"),amount:Math.abs(n)}),Object(C.jsx)(ce,{title:r("total-balance"),amount:t-o-n})]})}));function Re(e){var t=e.data,n=e.isChecked,o=e.selectionChange,r=e.accountColor,c=e.selectionIsEnabled,a=e.isSelected,i=e.rowSelected;return Object(C.jsxs)("div",{className:"flex flex-grow pr-1 py-2 px-2 hover:bg-blue-100"+(a?" bg-blue-100":""),children:[Object(C.jsx)(S,{enabled:c,checked:n,changed:function(e){return o(t.id,e)}}),Object(C.jsxs)("div",{className:"select-none flex-grow flex",onClick:function(){return i(t.id)},children:[Object(C.jsx)(F,{colour:r}),Object(C.jsx)("span",{className:"text-gray-500 mr-2 w-20 truncate text-right",children:te(Math.abs(t.amount))}),Object(C.jsx)("p",{className:"text-gray-500 w-20 pr-2",children:ne(t.time)}),Object(C.jsxs)("p",{className:"flex-grow text-gray-500",children:[t.place&&Object(C.jsx)("span",{className:"mr-2",children:t.place}),Object(C.jsx)("span",{className:"text-sm text-gray-400 flex-shrink",children:t.comment})]})]})]})}var we=Object(i.b)((function(e){return{transactions:e.transactions,accounts:e.accounts,selectedReportType:e.selectedReportType,selectedReport:e.selectedReportRow,selectedTransactionId:e.selectedTransactionId}}),(function(e){return Object(u.bindActionCreators)({SelectTransaction:Z,RemoveTransactionsFromSelectedReport:J,AddTransactionsToSelectedReport:G},e)}))((function(e){var t=e.transactions,n=e.accounts,o=e.selectedReportType,r=e.selectedReport,c=e.selectedTransactionId,a=e.SelectTransaction,i=e.RemoveTransactionsFromSelectedReport,u=e.AddTransactionsToSelectedReport,s=Object(X.a)().t,l=le(t,n,o).filter((function(e){return e.reportId===(null===r||void 0===r?void 0:r.id)||void 0===e.reportId})),d={};n.filter((function(e){return e.isSelected})).forEach((function(e){return d[e.name]=e.colour}));for(var m=void 0!==r,b=function(e,t){t?u(e):i(e)},p=[],j=null,f=null,x=function(e){var t=l[e];if(t.category!==j){var n=l.filter((function(e){return e.category===t.category})),o=Math.abs(n.reduce((function(e,t){return e+t.amount}),0));p.push(Object(C.jsx)(Te,{checked:n.reduce((function(e,t){return void 0!==t.reportId&&e}),!0),onChange:b,transactionIds:n.map((function(e){return e.id})),categoryName:""===t.category?"* * *":t.category,transactionSum:o,selectionIsEnabled:m,level:0},"header-0-"+t.category)),j=t.category,f=null}if(t.subCategory!==f&&""!==t.subCategory){var r=l.filter((function(e){return e.category===t.category&&e.subCategory===t.subCategory})),i=Math.abs(r.reduce((function(e,t){return e+t.amount}),0));p.push(Object(C.jsx)(Te,{checked:r.reduce((function(e,t){return void 0!==t.reportId&&e}),!0),onChange:b,transactionIds:r.map((function(e){return e.id})),categoryName:""===t.subCategory?"* * *":t.subCategory,transactionSum:i,selectionIsEnabled:m,level:1},"header-1-"+t.subCategory)),f=t.subCategory}p.push(Object(C.jsx)(Re,{isChecked:void 0!==t.reportId,selectionIsEnabled:m,data:t,accountColor:d[t.account],selectionChange:function(e,t){return b([e],t)},isSelected:c===t.id,rowSelected:function(e){return a(e)}},t.id))},v=0;v<l.length;v++)x(v);return Object(C.jsx)("div",{children:Object(C.jsx)(I,{header:s("transactions"),children:p})})}));function Te(e){var t=e.checked,n=e.onChange,o=e.transactionIds,r=e.categoryName,c=e.transactionSum,a=e.level,i=e.selectionIsEnabled;return Object(C.jsxs)("div",{className:"flex flex-grow py-2 px-2",style:{backgroundColor:0===a?"rgb(147, 197, 253)":"rgb(191, 219, 254)"},children:[Object(C.jsx)(S,{enabled:i,checked:t,changed:function(e){return n(o,e)}}),Object(C.jsx)("div",{className:"w-1 mr-1 bg-transparent"}),Object(C.jsxs)("div",{className:"flex-grow flex",children:[Object(C.jsx)("span",{className:"text-gray-800 mr-2 w-20 truncate text-right",children:te(c)}),Object(C.jsx)("p",{className:"flex-grow text-gray-800",children:r})]})]})}var Ce=function(){var e=Object(X.a)().i18n,t=function(t){e.changeLanguage(t)},n="ru"===e.language;return Object(C.jsxs)("div",{className:"flex absolute right-0 top-1",children:[Object(C.jsx)("button",{onClick:function(){return t("en")},className:"mr-1 rounded-full focus:outline-none w-9 h-9 shadow-md "+(n?"bg-blue-100 text-blue-700 opacity-50":"bg-blue-700 text-blue-100"),children:"EN"}),Object(C.jsx)("button",{onClick:function(){return t("ru")},className:"mr-1 rounded-full focus:outline-none w-9 h-9 shadow-md "+(n?"bg-blue-700 text-blue-100":"bg-blue-100 text-blue-700 opacity-50"),children:"RU"})]})};var Ne=function(){return pe("hit","/zen-report"),Object(C.jsxs)(i.a,{store:T,children:[Object(C.jsxs)("div",{className:"flex mx-6 pb-2 border-b-2 space-y-",children:[Object(C.jsx)(xe,{}),Object(C.jsx)(je,{}),Object(C.jsx)(Ce,{})]}),Object(C.jsxs)("div",{className:"flex items-stretch pt-4",children:[Object(C.jsxs)("div",{className:"w-1/4 border-gray-300 ml-5 border-r-2 pr-5 flex-shrink-0",children:[Object(C.jsx)(fe,{}),Object(C.jsx)(M,{}),Object(C.jsx)(ge,{}),Object(C.jsx)(M,{}),Object(C.jsx)(ye,{}),Object(C.jsx)(M,{}),Object(C.jsx)(he,{})]}),Object(C.jsx)("div",{className:"flex-grow divide-y-2 divide-gray-300 truncate mx-6",children:Object(C.jsx)(we,{})}),Object(C.jsxs)("div",{className:"w-1/4 mr-5 border-l-2 pl-5 border-gray-300 flex-shrink-0",children:[Object(C.jsx)(Y,{}),Object(C.jsx)(M,{}),Object(C.jsx)(ae,{})]})]})]})},Se=(n(91),n(31)),ke=n(51),Ie=n(15);Se.a.use(ke.a).use(Ie.e).init({resources:{en:{translation:{"file-load":"Load file","file-clear":"Clear data",incomes:"Earned",other:"Rest transactions",savings:"Savings",outcome:"Outcome",income:"Income",add:"Add",delete:"Delete",outcomes:"Spent","total-income":"Earned","total-outcome":"Spent","total-balance":"Balance",accounts:"Accounts",details:"Transaction details",date:"Date",amount:"Amount",category:"Category",subcategory:"Subcategory",place:"Place",commentary:"Commentary",transactions:"Transactions",source:"Source",copy:"Copy as a MD table",sum:"Total amount"}},ru:{translation:{"file-load":"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c","file-clear":"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c",incomes:"\u0414\u043e\u0445\u043e\u0434\u044b",other:"\u041f\u0440\u043e\u0447\u0435\u0435",savings:"\u0421\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u0438\u044f",outcome:"\u0420\u0430\u0441\u0445\u043e\u0434",income:"\u0414\u043e\u0445\u043e\u0434",add:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",delete:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",outcomes:"\u0420\u0430\u0441\u0445\u043e\u0434\u044b","total-income":"\u0414\u043e\u0445\u043e\u0434","total-outcome":"\u0420\u0430\u0441\u0445\u043e\u0434","total-balance":"\u0411\u0430\u043b\u0430\u043d\u0441",accounts:"\u0421\u0447\u0435\u0442\u0430",details:"\u0414\u0435\u0442\u0430\u043b\u0438",date:"\u0414\u0430\u0442\u0430",amount:"\u0421\u0443\u043c\u043c\u0430",category:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",subcategory:"\u0421\u0447\u0435\u0442",place:"\u041c\u0435\u0441\u0442\u043e",commentary:"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",transactions:"\u0422\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438",source:"\u0418\u0441\u0442\u043e\u0447\u043d\u0438\u043a",copy:"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u0430\u043a MD \u0442\u0430\u0431\u043b\u0438\u0446\u0443",sum:"\u0418\u0442\u043e\u0433"}}},fallbackLng:"en",detection:{order:["localStorage","cookie"],cache:["cookie"]},keySeparator:!1,interpolation:{escapeValue:!1}});Se.a;a.a.render(Object(C.jsx)(r.a.StrictMode,{children:Object(C.jsx)(Ne,{})}),document.getElementById("root"))}},[[92,1,2]]]);
//# sourceMappingURL=main.63431cc6.chunk.js.map